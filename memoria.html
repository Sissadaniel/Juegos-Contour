<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Fri Aug 30 2024 19:00:15 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="62df35ba98504299431d6871" data-wf-site="62df2718544276fc1f29bbb0" lang="es">
<head>
  <meta charset="utf-8">
  <title>Tu Memoria</title>
  <meta content="Tu Memoria" property="og:title">
  <meta content="Tu Memoria" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/juegos-contour.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Inconsolata:400,700"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon"><!--  Hotjar Tracking Code for https://promociones.tiendacontour.com.mx/  -->
  <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3166174,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>
<body class="body">
  <div class="alerta_pantalla">
    <div id="w-node-_30567c4e-48a6-90fd-9b04-1eb806a2ca38-431d6871" class="cal-vh w-embed w-script">
      <script>
// We listen to the resize event
window.addEventListener('resize', () => {
  // We execute the same script as before
  let vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);
});
</script>
      <style>
.body, .alerta.pantalla {
  height: 100vh; /* Fallback for browsers that do not support Custom Properties */
  height: calc(var(--vh, 1vh) * 100);
}
</style>
    </div>
    <div class="div-block-46">
      <div class="lottie-animation-4" data-w-id="8e68cca3-2248-2d32-016f-1c7e6459199b" data-animation-type="lottie" data-src="documents/40634-rotate-phone.json" data-loop="1" data-direction="1" data-autoplay="1" data-is-ix2-target="0" data-renderer="svg" data-default-duration="2.7" data-duration="0"></div>
      <div>Tu pantalla es muy pequeña para jugar, te sugerimos cambiar la orientación de tu dispositivo.</div>
    </div>
    <div class="w-embed">
      <style>
@media screen and (min-height: 415px) and (min-width:300px){
.alerta_pantalla{
display:none;
}
}
</style>
    </div>
  </div>
  <h1 class="heading-7">Tu Memoria CONTOUR<strong><sup>®</sup></strong></h1>
  <div id="initial-popup" class="popup form">
    <div class="popup-content-wrapper---brix popup-1-content-wrapper---brix-copy">
      <div class="popup-1---brix">
        <div class="div-block-19"><img src="images/Mobile-Screen-Mockup-with-App-icon.png" loading="lazy" sizes="100vw" srcset="images/Mobile-Screen-Mockup-with-App-icon-p-500.png 500w, images/Mobile-Screen-Mockup-with-App-icon-p-800.png 800w, images/Mobile-Screen-Mockup-with-App-icon.png 1000w" alt=""></div>
        <div id="popup_content" class="div-block-18">
          <h2 id="popup_head" class="heading-3">¡Ya completaste Tu Memoria CONTOUR®!</h2>
          <p id="popup_content" class="paragraph-73">Gracias por tu interés en capacitarte en el nuevo, divertido y original producto de Ascensia Diabetes Care: ¡CONTOUR<sup>®</sup>PLUS ELITE!</p>
          <div class="form-block w-form">
            <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form" data-wf-page-id="62df35ba98504299431d6871" data-wf-element-id="98678177-e0b8-94e4-e5d1-dfd0e247daf5">
              <div class="div-block-33"><select id="field" name="field" data-name="Field" class="select-field hidden w-select">
                  <option value="">Farmacia 1</option>
                  <option value="First">Farmacia 2</option>
                  <option value="Second">Farmacia 3</option>
                  <option value="Third">Farmacia 4</option>
                </select><input class="text-field w-input" maxlength="256" name="email" data-name="Email" placeholder="Introduce tu correo electrónico" type="email" id="form_email_field" required=""><input class="text-field w-input" maxlength="256" name="Nombre" data-name="Nombre" placeholder="Introduce tu nombre" type="text" id="form_name_field" required=""><input class="text-field w-input" maxlength="256" name="Phone" data-name="Phone" placeholder="Introduce tu teléfono" type="tel" id="form_phone_field" required=""><input class="text-field w-input" maxlength="256" name="Sucursal" data-name="Sucursal" placeholder="Sucursal" type="text" id="form_sucursal_field" required=""></div><input id="form_send_btn" type="submit" data-wait="Por favor espera..." class="submit-button form-block w-button" value="Ver puntuación">
            </form>
            <div class="w-form-done">
              <div>Thank you! Your submission has been received!</div>
            </div>
            <div class="w-form-fail">
              <div>Oops! Something went wrong while submitting the form.</div>
            </div>
          </div>
        </div><img src="images/close-icon-popups-webflow-cloneable-template-brix-templates.svg" data-w-id="98678177-e0b8-94e4-e5d1-dfd0e247db02" width="16" height="16" alt="" class="close-popup---brix">
      </div>
    </div>
    <div class="overlay---brix"></div>
  </div>
  <div id="match-popup" class="popup absolute">
    <div class="popup-content-wrapper---brix popup-1-content-wrapper---brix-copy">
      <div class="popup-1---brix">
        <div class="div-block-19"><img src="images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow.png" loading="lazy" sizes="100vw" srcset="images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow-p-500.png 500w, images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow-p-800.png 800w, images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow.png 830w" alt="" class="image-7"></div>
        <div class="div-block-18">
          <div class="div-block-52">
            <h2 class="heading-4 white">CONSTELACIÓN</h2>
          </div>
          <p class="paragraph-72 white"> Tu luz guía para el control de la diabetes es parte del nuevo sistema de CONTOUR<sup>®</sup>PLUS ELITE, el cual es muy fácil de usar para el control de la diabetes proporcionando lecturas claras y exactas en las que puedes confiar.</p>
          <div class="div-block-17">
            <a data-w-id="b64ca982-0f13-c3fe-c08d-1ff8fb60b701" href="#" class="_21y w-button">Seguir jugando</a>
          </div>
        </div><img src="images/close-icon-popups-webflow-cloneable-template-brix-templates.svg" data-w-id="b64ca982-0f13-c3fe-c08d-1ff8fb60b707" width="16" height="16" alt="" class="close-popup---brix">
      </div>
    </div>
    <div data-w-id="b64ca982-0f13-c3fe-c08d-1ff8fb60b708" class="overlay---brix"></div>
  </div>
  <div id="thx-popup" class="popup absolute thx">
    <div class="popup-content-wrapper---brix popup-1-content-wrapper---brix-copy">
      <div class="popup-1---brix">
        <div class="div-block-19"><img src="images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow.png" loading="lazy" sizes="100vw" srcset="images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow-p-500.png 500w, images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow-p-800.png 800w, images/Copia-de-Contour_Plus_Elite_93mgdl---with-strip---Bsample---no-shadow.png 830w" alt="" class="image-7"></div>
        <div class="div-block-18">
          <h1 class="heading-9">¡Logrado!</h1>
          <h3 id="heading_moves" class="heading-10">Completaste el reto.</h3>
          <h2 class="heading-4 white">GRACIAS POR PARTICIPAR</h2>
        </div><img src="images/close-icon-popups-webflow-cloneable-template-brix-templates.svg" data-w-id="e6d51f8a-f49e-284d-ac54-4b91dbfc93c5" width="16" height="16" alt="" class="close-popup---brix">
      </div>
    </div>
    <div data-w-id="e6d51f8a-f49e-284d-ac54-4b91dbfc93c6" class="overlay---brix"></div>
  </div>
  <div id="prize-claim" class="prize-claim-btn w-node-e91016f4-133b-b6a4-c33a-aec599d1033c-431d6871">
    <a data-w-id="87dc18f7-c5ca-0c8c-f00a-aa4c89127166" href="#" class="button-2 w-button">Redimir regalo</a>
  </div>
  <div class="wrapper">
    <div class="section memoria">
      <div id="w-node-_0ac6d94d-b987-e9ca-1b44-66f0676910f3-431d6871" class="div-block-30">
        <h1 id="w-node-_020dcf02-ccae-7202-2104-f734f5e62e86-431d6871" class="heading-2">Tu Memoria CONTOUR</h1>
        <div class="text-block-3">Elige cual quieres descubrir tocándola con tu dedo.</div>
      </div>
      <div id="gameboard" class="gameboard w-node-_80523cc5-a9b6-adf3-f674-450d51113923-431d6871">
        <div id="w-node-_8d7f1e6e-936c-f5aa-9381-543613616a4a-431d6871" class="card">
          <div><span class="text-span">Wololo</span></div>
          <h3 class="heading-11">Heading</h3>
        </div>
        <div id="w-node-_8916f427-734d-6938-6dc3-9270e33fe6cd-431d6871" data-w-id="8916f427-734d-6938-6dc3-9270e33fe6cd" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
        <div id="w-node-_811c8042-703d-64ab-5461-c905b9ccf54a-431d6871" data-w-id="811c8042-703d-64ab-5461-c905b9ccf54a" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
        <div id="w-node-c37895cc-b8f7-6bbf-2cdb-d75798e1dd16-431d6871" data-w-id="c37895cc-b8f7-6bbf-2cdb-d75798e1dd16" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
        <div id="w-node-a6abe3c9-9553-27df-02c6-8c603cd8356b-431d6871" data-w-id="a6abe3c9-9553-27df-02c6-8c603cd8356b" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
        <div id="w-node-_92d6110a-2481-308b-1b72-17576f878118-431d6871" data-w-id="92d6110a-2481-308b-1b72-17576f878118" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
        <div id="w-node-_6a329883-d637-fc72-9ec1-5fd38839926f-431d6871" data-w-id="6a329883-d637-fc72-9ec1-5fd38839926f" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
        <div id="w-node-_25e93ad3-1748-6353-4bd9-d53e616846bc-431d6871" data-w-id="25e93ad3-1748-6353-4bd9-d53e616846bc" class="card">
          <div><span class="text-span">Wololo</span></div>
        </div>
      </div>
      <div id="scoreboard" class="scoreboard w-node-_9f85e405-51c4-2314-b88a-5494b7060f31-431d6871">
        <div class="div-block-27">
          <div class="div-block-34">
            <div class="div-block-26 memoria">
              <div id="percentage" class="text-block-2">0%</div>
            </div>
            <div id="graph" data-percent="0" class="chart"></div>
            <div class="chartscript w-embed w-script">
              <script>
var el = document.getElementById('graph'); // get canvas
var options = {
    percent:  el.getAttribute('data-percent') || 25,
    size: el.getAttribute('data-size') || 100,
    lineWidth: el.getAttribute('data-line') || 15,
    rotate: el.getAttribute('data-rotate') || 0
}
var canvas = document.createElement('canvas');
var span = document.createElement('span');
span.textContent = options.percent + '%';
if (typeof(G_vmlCanvasManager) !== 'undefined') {
    G_vmlCanvasManager.initElement(canvas);
}
var ctx = canvas.getContext('2d');
canvas.width = canvas.height = options.size;
/*el.appendChild(span);*/
el.appendChild(canvas);
ctx.translate(options.size / 2, options.size / 2); // change center
ctx.rotate((-1 / 2 + options.rotate / 180) * Math.PI); // rotate -90 deg
//imd = ctx.getImageData(0, 0, 240, 240);
var radius = (options.size - options.lineWidth) / 2;
var drawCircle = function(color, lineWidth, percent) {
		percent = Math.min(Math.max(0, percent || 1), 1);
		ctx.beginPath();
		ctx.arc(0, 0, radius, 0, Math.PI * 2 * percent, false);
		ctx.strokeStyle = color;
        ctx.lineCap = 'round'; // butt, round or square
		ctx.lineWidth = lineWidth
		ctx.stroke();
};
/*drawCircle('transparent', options.lineWidth, 100 / 100);
drawCircle('#fff', options.lineWidth, options.percent / 100);*/
</script>
              <style>
.chart{
    filter: drop-shadow(2px 4px 6px white);
    }
</style>
            </div>
          </div>
          <div class="text-block">Completado</div>
        </div>
        <div id="w-node-_385c1304-920b-0b4a-2acf-7b5734dad9fe-431d6871" class="div-block-27 mob_hidden">
          <div class="div-block-26 memoria">
            <div id="numMoves" class="text-block-2">0</div>
          </div>
          <div class="text-block">Movimientos</div>
        </div><img src="images/Caja__frontal_04_alta-removebg-preview.png" loading="lazy" id="w-node-ee60aef2-b7ce-d2b0-e7ad-b055e336bf04-431d6871" sizes="(max-width: 767px) 100vw, (max-width: 991px) 100px, 110px" alt="" srcset="images/Caja__frontal_04_alta-removebg-preview-p-500.png 500w, images/Caja__frontal_04_alta-removebg-preview.png 500w" class="image-6">
      </div>
      <div id="settings" class="settings">
        <div class="w-embed"><input type="number" id="numRows" value="4" placeholder="4" max="10" min="2"> &#215; <span id="boardSize"></span> BOARD</div>
      </div>
      <div class="animations w-embed">
        <style>
/*https://jsfiddle.net/jlam55555/2x0ufnpz/50/*/
 @keyframes spinIn {
 /*
     0% {
         transform: rotateZ(0deg) rotateY(0deg);
        -webkit-transform: rotateZ(0deg) rotateY(0deg);
    }
     50% {
         color: transparent;
         transform: rotateZ(-10deg) rotateY(90deg);
        -webkit-transform: rotateZ(-10deg) rotateY(90deg);
    }
     51% {
         color: black;
    }
     100% {
         transform: rotateZ(0deg) rotateY(180deg);
         color: black;
         -webkit-transform: rotateZ(0deg) rotateY(180deg);
    }*/
    	0% { transform: rotateY(0deg); }
	50% { color: transparent; }
	51% { color: black; }
	100% { transform: rotateY(180deg); color: black; }
}
 @keyframes spinOut {
 /*
     0% {
         transform: rotateY(180deg);
    }
     50% {
         color: black;
    }
     51% {
         color: transparent;
    }
     100% {
         transform: rotateY(0deg);
         -webkit-transform: rotateY(0deg);
        color: transparent;
    }*/
    	0% { transform: rotateY(180deg); }
	50% { color: black; }
	51% { color: transparent; }
	100% { transform: rotateY(0deg); color: transparent; }
}
 @keyframes shake {
     /*0% {
         transform: rotate(0deg);
         -webkit-transform: rotate(0deg);
    }
     20% {
         transform: rotate(10deg);
        -webkit-transform: rotate(10deg);
    }
     50% {
         transform: rotate(0deg);
        -webkit-transform: rotate(0deg);
         background-color: rgba(255, 200, 200, 0.75);
    }
     80% {
         transform: rotate(-10deg);
        -webkit-transform: rotate(-10deg);
    }
     100% {
         transform: rotate(0deg);
        -webkit-transform: rotate(0deg);
         background-color: rgba(255, 255, 255, 0.75) 
    }*/
    	0% { transform: rotate(0deg); }
	20% { transform: rotate(10deg); }
	50% { transform: rotate(0deg); background-color: rgba(255, 200, 200, 0.75); }
	80% { transform: rotate(-10deg); }
	100% { transform: rotate(0deg); background-color: rgba(255, 255, 255, 0.75) }
}
 @keyframes disappear {
    /* from {
         opacity: 1;
         transform: rotateY(18deg);
        -webkit-transform: rotateY(18deg);
    }
     to {
         opacity: 0;
         transform: rotateY(180deg);
        -webkit-transform: rotateY(180deg);
    }*/
    	from { opacity: 1; }
	to { opacity: 0; }
}
 .card span, .card h3, .card p {
     transform: scaleX(-1);
     -webkit-transform: scaleX(-1);
}
 .card h3{
     max-width: 100ch;
     text-align: center;
    /* word-break: break-all;
    */
     font-size: 65%;
     line-height: 1em;
}
 .card img{
     max-height:70%;
}
 .card img {
    transform: scaleX(-1) translate(0px, -250%);
    -webkit-transform: scaleX(-1) translate(0px, -250%);
}
 .active.card img {
    transform: scaleX(-1) translate(0px, 0px);
    -webkit-transform: scaleX(-1) translate(0px, 0px);
}
 .active.card h3{
    color:#036;
}
 div.card.active {
     animation: spinIn .2s linear 1 forwards;
     -webkit-animation: spinIn .2s linear 1 forwards;
}
 div.card.inactive {
     animation: spinOut .2s linear 1 forwards;
     -webkit-animation: spinOut .2s linear 1 forwards;
}
 div.card.nope {
     animation: shake .2s linear 1;
     -webkit-animation: shake .2s linear 1;
}
 div.card.gone {
     animation: disappear .2s linear 1 forwards;
     -webkit-animation: disappear .2s linear 1 forwards;
     opacity: 0 !important;
     cursor: auto;
}
 .card.active span {
     font-size: 0px;
}
</style>
      </div>
    </div>
    <div class="div-block-28">
      <a id="w-node-_986518ae-5736-2183-d6b6-640a6fdfb557-431d6871" href="https://tiendacontour.com.mx/tc-constelacion-contourplus-elite/" target="_blank" class="link-block w-inline-block">
        <div>Términos y Condiciones</div>
      </a>
      <a id="w-node-_5b26fcf4-e30a-c317-ce3b-77dabaf5f41a-431d6871" href="https://tiendacontour.com.mx/aviso-de-privacidad/" target="_blank" class="link-block w-inline-block">
        <div>Aviso de privacidad</div>
      </a>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=62df2718544276fc1f29bbb0" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <script>
/*$("#match-popup").css("display", "none");
$("#match-popup").css("opacity", "0");*/
const prizeClaim = document.getElementById('prize-claim'),
			gameboard = document.getElementById('gameboard'),
      popup = document.getElementById('initial-popup'),
      thx_popup =  document.getElementById('thx-popup'),
      heading_moves =  document.getElementById('heading_moves'),
      form_name_field = document.getElementById('form_name_field'),
      form_email_field = document.getElementById('form_email_field'),
      form_phone_field = document.getElementById('form_phone_field'),
      form_send_btn = document.getElementById('form_send_btn');
var numOpen = 0;
var numMoves = 0;
var percentage = 0;
var numRows = parseInt($("input#numRows").val());
var cardsArray = [
	{
    "index": 1,
    "image": "https://cdn.prod.website-files.com/62df2718544276fc1f29bbb0/66cfae4555b54048a15c24f7_PantallaAppContourDiabetes.png",
    "title": "CONTOUR® DIABETES APP",
   "message": "CONTOUR®PLUS ELITE es un glucómetro inteligente con conectividad. Se sincroniza de manera automática y sencilla con la app gratuita CONTOUR® DIABETES. Esto permite a los usuarios registrar, comprender y compartir fácilmente los resultados de su automonitoreo de glucosa en sangre."
  },
	{
    "index": 2,
    "image": "https://cdn.prod.website-files.com/62df2718544276fc1f29bbb0/66cfae4580066531ff5193cd_PantallaCPE.png",
    "title": "CONTOUR®PLUS ELITE",
    "message": "CONTOUR®PLUS ELITE cuenta con la función smartLIGHT® que facilita la interpretación de los resultados de glucosa. SmartLIGHT® utiliza luces de colores en el puerto del glucómetro para proporcionar una señal visual rápida y clara."
  },
	{
    "index": 3,
    "image": "https://cdn.prod.website-files.com/62df2718544276fc1f29bbb0/66cfae46c731c1981ad4f49d_Smartlight.png",
    "title": "Tecnología smartLIGHT®",
    "message": "La tecnología smartLIGHT® utiliza tres sencillos colores que guían hacia un mejor entendimiento de los niveles de glucosa en sangre.\n\nAmarillo Por encima de rango \nVerde Dentro de rango \nRojo Por debajo de rango"
  },
	{
    "index": 4,
    "image": "https://cdn.prod.website-files.com/62df2718544276fc1f29bbb0/66cfae459cb2dab48ff589a9_Tiras-Reactivas.png",
    "title": "Tiras reactivas CONTOUR®PLUS",
    "message": "Las Tiras Reactivas CONTOUR®PLUS están diseñadas para usarse con CONTOUR®PLUS ELITE. Su característica Segunda-Oportunidad de Muestra® permite aplicar más sangre en la misma tira durante 60 segundos si la primera muestra no fue suficiente."
  },
].reduce(function (res, current, index, array) {
    return res.concat([current, current]);
}, []);
console.log(cardsArray);
function showPrizeClaim() {
  console.log("In showPrizeClaim");
	gameboard.style.display = prizeClaim.style.display = 'flex';
}
function showPopup() {
	popup.style.display = 'flex';
}
var draw = function() {
	/*drawCircle('#efefef', 15, 100 / 100);*/
	numMoves = 0;
	numOpen = 0;
  percentage = 0;
	$("#numMoves").html(numMoves);
	$("#percentage").html(percentage + "%");
	$(".circle").attr("data-percent", 0);
	var gameboard = $("div#gameboard");
	$("span#boardSize").text(numRows);
	if(numRows % 2 != 0) {
		$("input#numRows").val(4);
		$("span#boardSize").text(4);
		draw();
		return;
	}
	var allNums = [];
	for(var i = 1; i <= numRows*numRows/4; i++) {
		allNums.push(
    	{
      	"index": i,
        "image": "https://placekitten.com/300/300"
      },
    	{
      	"index": i,
        "image": "https://placekitten.com/300/300"
      }
    );
	}
	// The following shuffle uses the "Fisher-Yates" shuffle algorithm
	// See http://bost.ocks.org/mike/shuffle/
	var index, left = cardsArray.length;
	while(left) {
		index = Math.floor(Math.random() * left--);
		var tmp = cardsArray[left];
		cardsArray[left] = cardsArray[index];
		cardsArray[index] = tmp;
	}
  //console.log(cardsArray);
	var margin = -(5/2)*numRows + 30;
	gameboard.css({
		"padding": margin/2 + "px"
	});
	gameboard.empty();
	for(var i = 0; i < numRows*numRows/2; i++) {
		var newSquare = $("<div>");
		newSquare.append("<span>" + cardsArray[i].index + "</span>");
    newSquare.append("<img src='" + cardsArray[i].image + "'/>");
 		newSquare.append("<h3>" + cardsArray[i].title + "</h3>");
  	/*newSquare.append("<p>" + cardsArray[i].message + "</p>");*/
		newSquare.addClass("card");
		newSquare.css({
			/*"width": "calc(100% / " + 1 + " - " + 0 + "px)",
			"height": "calc(100% / "+ 1  +" - " + 0 + "px)",
			"margin": margin/2 + "px",*/
      "display": "flex",
			"flex-direction": "column",
 			"overflow": "hidden",
		});
		gameboard.append(newSquare);
	}
	$("div.card").click(function() {
		if(!$(this).hasClass("active")) {
			if(numOpen == 2) {
				$(this).addClass("nope");
				setTimeout(function() {
					$("div.card.nope").removeClass("nope");
				}, 200);
				$("#numMoves").html(numMoves);
				return;
			}
			numOpen++;
			$(this).removeClass("inactive").addClass("active");
			if(numOpen == 2) {
				setTimeout(function() {
					numOpen = 0;
					numMoves++;
          const firstCardText = $("div.card.active:first > span").text();
					if(firstCardText == $("div.card.active:last > span").text()) {
          	percentage += 25;
          	let matchedCard = cardsArray.find(obj => {
              return obj.index === parseInt(firstCardText);
            })
          	console.log(firstCardText);
            cardsArray[parseInt(firstCardText)];
						$("div.card.active").removeClass().addClass("card").addClass("gone");
            //$("#scoreboard").dialog('open');
            if($("div.gone").length == numRows*numRows/2) {
							//setTimeout(showPrizeClaim(), 2000);
              //showPrizeClaim();
              showPopup();
						}
            $("#match-popup img").removeAttr( "srcset" );
						$("#match-popup img").removeAttr( "sizes" );
						$("#match-popup img").attr("src", matchedCard.image)
            $("#match-popup h2").html(matchedCard.title);
  $("#match-popup p").html(
    matchedCard.message
        .replace(/\n/g, '<br>') // Replace line breaks
        .replace(/Amarillo/g, '<b><span style="color: yellow;">Amarillo</span></b>') // Highlight "Amarillo" in yellow
        .replace(/Verde/g, '<b><span style="color: green;">Verde</span></b>') // Highlight "Verde" in green
        .replace(/Rojo/g, '<b><span style="color: red;">Rojo</span></b>') // Highlight "Rojo" in red
);
            $("#match-popup").css("display", "flex");
						$("#match-popup").css("opacity", "unset");
						$("#numMoves").html(numMoves);
						$("#percentage").html(percentage + "%");
						drawCircle('white', 3, percentage / 100);
					} else {
						$("div.card.active").removeClass("active").addClass("inactive");
					}
					$("#numMoves").html(numMoves);
				}, 500);
			}
		} else {
			if(numOpen == 1 || $(this).hasClass("active")) {
				return;
			}
			numOpen--;
			$(this).removeClass("active").addClass("inactive");
			setTimeout(function() {
				$("div.card.inactive").removeClass("inactive");
			}, 200);
		}
	});
	numOpen = 0;
};
$("input#numRows").blur(draw);
draw();
$("#prize-claim").click(function() {
	console.log("clicked #prize-claim");
	/*if($("div.gone").length == numRows*numRows/2) {
  	if(confirm("Terminaste en " + numMoves + " intentos!\nAcercate a nuestro consultor para recibir tu premio"))
  	  draw();
	}*/
  showPopup();
});
function validateEmail(input) {
  console.log(input);
  var validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
  if (input.match(validRegex)) return true;
  else return false;
}
$("#form_send_btn").click(function(event) {
	event.preventDefault();
	console.log("clicked #form_send_btn");
  let valid_email = validateEmail($("#form_email_field").val());
	if (valid_email === true && form_name_field.value && form_email_field.value && form_phone_field.value && form_sucursal_field.value) {
  	//window.location.replace(`https://hook.us1.make.com/0ewplqwlxha8a39gyfefnaf0i21eohtu?numMoves=${numMoves}&email=${form_email_field.value}&name=${form_name_field.value}&phone=${form_phone_field.value}`);
  	fetch(`https://hook.us1.make.com/0ewplqwlxha8a39gyfefnaf0i21eohtu?numMoves=${numMoves}&email=${form_email_field.value}&name=${form_name_field.value}&phone=${form_phone_field.value}&sucursal=${form_sucursal_field.value}`)
    	//.then((response) => response.json())
    	.then((response) => {
      	popup.style.display = 'none';
        heading_moves.innerText = `Completaste el reto en ${numMoves} movimientos.`;
        thx_popup.style.display = 'flex';
      	console.log(response);
      });
  } else {
  	$( "#initial-popup input" ).each(function() {
    	if( !this.value ) {
      	$(this).addClass('warning');
      }
    });
  }
	/*if($("div.gone").length == numRows*numRows/2) {
  	if(confirm("Terminaste en " + numMoves + " intentos!\nAcercate a nuestro consultor para recibir tu premio"))
  	  draw();
	}*/
});
/*$('#initial-popup input').blur(function()
{
	console.log('we here');
  if( !this.value ) {
  	console.log('no value!');
    $(this).addClass('warning');
  } else {
    $(this).removeClass('warning');
  }
});*/
$('#initial-popup input').blur(function() {
  if (!this.value) {
    $(this).addClass('warning');
  } else if ($(this).is("#form_email_field")) {
    if (!validateEmail(this.value)) {
      $(this).addClass('warning');
    } else $(this).removeClass('warning');
  } else $(this).removeClass('warning');
});
/*$(function () {
  $( "#scoreboard" ).dialog({
    autoOpen: false
  });
  $("#opener").click(function() {
    $("#scoreboard").dialog('open');
  });
});*/
</script>
</body>
</html>
